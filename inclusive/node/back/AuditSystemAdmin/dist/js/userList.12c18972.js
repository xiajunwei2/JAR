(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userList"],{"181b":function(e,t,a){"use strict";var r=a("fbdd"),i=a.n(r);i.a},"76c7":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[a("div",{staticClass:"account_head"},[a("div",{staticClass:"head_search"},[a("el-select",{staticStyle:{margin:"0 0.521vw"},attrs:{clearable:"",placeholder:"账号类型"},model:{value:e.formSearch.companyType,callback:function(t){e.$set(e.formSearch,"companyType",t)},expression:"formSearch.companyType"}},e._l(e.$store.state.option.yhzhlxOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticStyle:{margin:"0 0.521vw"},attrs:{"prefix-icon":"el-icon-search",placeholder:"关联机构名称"},model:{value:e.formSearch.companyName,callback:function(t){e.$set(e.formSearch,"companyName",t)},expression:"formSearch.companyName"}}),a("el-input",{staticStyle:{margin:"0 0.521vw"},attrs:{"prefix-icon":"el-icon-search",placeholder:"用户账号"},model:{value:e.formSearch.userName,callback:function(t){e.$set(e.formSearch,"userName",t)},expression:"formSearch.userName"}}),a("el-input",{staticStyle:{margin:"0 0.521vw"},attrs:{"prefix-icon":"el-icon-search",placeholder:"用户姓名"},model:{value:e.formSearch.nickName,callback:function(t){e.$set(e.formSearch,"nickName",t)},expression:"formSearch.nickName"}}),a("el-select",{staticStyle:{margin:"0 0.521vw"},attrs:{clearable:"",placeholder:"账号状态"},model:{value:e.formSearch.status,callback:function(t){e.$set(e.formSearch,"status",t)},expression:"formSearch.status"}},e._l(e.$store.state.option.zhztOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"head_time"},[a("div",{staticClass:"time_msg"},[e._v("注册时间:")]),a("el-date-picker",{attrs:{"value-format":"timestamp",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){return e.getTime()}},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}}),a("el-button",{staticClass:"time_btn",attrs:{type:"danger"},on:{click:function(t){return e.search()}}},[e._v("查询")]),a("el-button",{staticClass:"time_btn",attrs:{type:"danger"},on:{click:function(t){return e.searchDownload()}}},[e._v("导出")])],1)]),a("div",{staticClass:"form_btn"},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.add()}}},[e._v("添加金融机构账号")])],1),a("div",{staticClass:"account_form"},[a("vxe-table",{staticClass:"form_table",attrs:{border:"","show-header-overflow":"","show-overflow":"","highlight-hover-row":"",align:"center",data:e.tableData}},[a("vxe-table-column",{attrs:{field:"id",title:"用户ID"}}),a("vxe-table-column",{attrs:{field:"companyTypeStr",title:"账号类型"}}),a("vxe-table-column",{attrs:{field:"userName",title:"用户账号"}}),a("vxe-table-column",{attrs:{field:"nickName",title:"姓名"}}),a("vxe-table-column",{attrs:{field:"phoneNumber",title:"联系电话"}}),a("vxe-table-column",{attrs:{field:"remark",title:"备注"}}),a("vxe-table-column",{attrs:{field:"createdTime",title:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.$moment(1e3*r.createdTime).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),a("vxe-table-column",{attrs:{field:"statusStr",title:"账号状态"}}),a("vxe-table-column",{staticClass:"table_todo",attrs:{width:"200",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[1!=r.companyType?a("vxe-button",{staticStyle:{color:"#ccc"},attrs:{type:"text"}},[e._v("编辑")]):e._e(),1==r.companyType?a("vxe-button",{attrs:{type:"text"},on:{click:function(t){return e.diaPage(r)}}},[e._v("编辑")]):e._e(),a("vxe-button",{attrs:{type:"text"},on:{click:function(t){return e.userdetail(r)}}},[e._v("详情页")])]}}])})],1),e.page5.totalResult>0?a("vxe-pager",{attrs:{background:"","current-page":e.page5.currentPage,"page-size":e.page5.pageSize,total:e.page5.totalResult,layouts:["Total","PrevJump","PrevPage","JumpNumber","NextPage","NextJump","FullJump","Sizes"]},on:{"update:currentPage":function(t){return e.$set(e.page5,"currentPage",t)},"update:current-page":function(t){return e.$set(e.page5,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.page5,"pageSize",t)},"update:page-size":function(t){return e.$set(e.page5,"pageSize",t)},"page-change":e.handlePageChange2}}):e._e()],1),a("el-dialog",{attrs:{title:e.title,visible:e.jrzhdialog,width:"30%"},on:{"update:visible":function(t){e.jrzhdialog=t},close:e.closedialoguserList}},[a("div",{staticClass:"dia_main"},[e.jrzhdialog?a("el-form",{ref:"closedialoguserList",staticClass:"demo-ruleForm",staticStyle:{width:"100%"},attrs:{model:e.form,rules:e.rules,"label-width":"6.250vw"}},[a("el-form-item",{attrs:{label:"关联机构:",prop:"companyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"关联机构"},model:{value:e.form.companyId,callback:function(t){e.$set(e.form,"companyId",t)},expression:"form.companyId"}},e._l(e.$store.state.sysCodegetCode.AllMechanism,(function(e){return a("el-option",{key:e.id,attrs:{label:e.companyName,value:e.id}})})),1)],1),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"角色:",prop:"name"}},[e._v(" "+e._s(e.getMechan?"子机构用户":"机构管理员")+" ")]),a("el-form-item",{attrs:{label:"账号:"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),a("el-form-item",{attrs:{label:"姓名:",prop:"nickName"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),a("el-form-item",{attrs:{label:"密码:"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"联系电话:"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{staticStyle:{width:"100%"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"账号状态:"}},[a("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":0==e.form.status?"启用":"禁用","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.jrzhdialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sure("closedialoguserList")}}},[e._v("确 定")])],1)])],1)},i=[],s=(a("ecb4"),a("d497"),a("4ec3")),o={data:function(){return{meachanFlag:null,title:"",account:"",name:"",phoneNum:"",departs:"",status:"",times:[],allAlign:null,tableData:[],page5:{currentPage:1,pageSize:10,totalResult:0},formSearch:{companyType:"",companyName:"",userName:"",nickName:"",status:"",registerTimeDown:"",registerTimeUp:""},form:{id:null,companyId:"",userName:"",nickName:"",password:"",status:0,phoneNumber:"",remark:""},jrzhdialog:!1,rules:{companyId:[{required:!0,message:"请输入账号",trigger:"change"}],nickName:[{required:!0,message:"请输入姓名",trigger:"blur"}],part:[{required:!0,message:"所属部门",trigger:"blur"}],role:[{required:!0,message:"角色属性",trigger:"change"}]}}},created:function(){this.ajaxTable(),console.log(this.getMechan)},computed:{getMechan:function(){var e=this,t=this.$store.state.sysCodegetCode.AllMechanism,a=t.some((function(t){if(t.id==e.form.id)return!t.companyName.indexOf("--")}));return a}},methods:{getTime:function(){this.formSearch.registerTimeDown=this.times[0]/1e3,this.formSearch.registerTimeUp=this.times[1]/1e3},handlePageChange2:function(e){var t=e.currentPage,a=e.pageSize;this.page5.currentPage=t,this.page5.pageSize=a,this.ajaxTable()},ajaxTable:function(){var e=this,t=this,a={content:t.formSearch,pager:{pageSize:this.page5.pageSize,currentPage:this.page5.currentPage}};this.$store.commit("loadingChange",!0),s["a"].sysUsergetUserList(a).then((function(a){e.$store.commit("loadingChange",!1),0==a.code?(t.tableData=a.content.list,t.page5.totalResult=a.content.pager.totalCount,t.page5.currentPage=a.content.pager.currentPage,e.formSearch.registerTimeDown="",e.formSearch.registerTimeUp=""):e.$message.error(a.msg)}))},add:function(){this.title="添加用户",this.jrzhdialog=!0,this.form={id:null,companyId:"",userName:"",nickName:"",password:"",status:0,phoneNumber:"",remark:""}},search:function(){var e=this;e.page5.pageSize=this.page5.pageSize,e.page5.currentPage=1,this.ajaxTable()},searchDownload:function(){var e=this,t=this,a={content:{companyType:this.formSearch.companyType,companyName:this.formSearch.companyName,userName:this.formSearch.userName,nickName:this.formSearch.nickName,status:this.formSearch.status,registerTimeDown:this.formSearch.registerTimeDown,registerTimeUp:this.formSearch.registerTimeUp},pager:{pageSize:t.page5.pageSize,currentPage:t.page5.currentPage}};this.$store.commit("loadingChange",!0),s["a"].sysUserexportUserList(a).then((function(t){if(e.$store.commit("loadingChange",!1),0==t.code){var a=document.createElement("a");a.setAttribute("href",t.content),a.setAttribute("target","_target"),a.setAttribute("style","display:none"),a.setAttribute("id","startTelMedicine"),document.getElementById("startTelMedicine")&&document.body.removeChild(document.getElementById("startTelMedicine")),document.body.appendChild(a),a.click()}else e.$message.error(t.msg)}))},userdetail:function(e){this.$router.push({name:"userListDetail",query:{id:e.id,row:e}})},diaPage:function(e){var t=this;this.title="编辑用户";var a={userId:e.id};this.$store.commit("loadingChange",!0),s["a"].sysUserGetMechanismUserDetail(a).then((function(e){t.$store.commit("loadingChange",!1),0==e.code?(t.form=JSON.parse(JSON.stringify(e.content)),t.jrzhdialog=!t.jrzhdialog):t.$message.error(e.msg)}))},sure:function(e){var t=this,a=this,r=this.form;this.$refs[e].validate((function(e){e&&(t.$store.commit("loadingChange",!0),s["a"].sysUseraddOrUpdateMechanismUser(r).then((function(e){t.$store.commit("loadingChange",!1),0==e.code?(a.page5.pageSize=t.page5.pageSize,a.page5.currentPage=t.page5.curr,a.ajaxTable(),a.jrzhdialog=!1,t.$message.success(e.msg)):a.$message.error(e.msg)})))}))},closedialoguserList:function(){this.$refs["closedialoguserList"].resetFields()}}},n=o,l=(a("181b"),a("9ca4")),c=Object(l["a"])(n,r,i,!1,null,"73666f52",null);t["default"]=c.exports},d497:function(e,t,a){"use strict";var r=a("1c8b"),i=a("5dfd").some,s=a("d7e1"),o=a("ff9c"),n=s("some"),l=o("some");r({target:"Array",proto:!0,forced:!n||!l},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},d7e1:function(e,t,a){"use strict";var r=a("efe2");e.exports=function(e,t){var a=[][e];return!!a&&r((function(){a.call(null,t||function(){throw 1},1)}))}},ecb4:function(e,t,a){"use strict";var r=a("1c8b"),i=a("45af").indexOf,s=a("d7e1"),o=a("ff9c"),n=[].indexOf,l=!!n&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),m=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:l||!c||!m},{indexOf:function(e){return l?n.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},fbdd:function(e,t,a){}}]);