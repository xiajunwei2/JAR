(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["departManage"],{2792:function(e,t,a){"use strict";var r=a("bb24"),l=a.n(r);l.a},b011:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index"},[a("div",{staticClass:"form_btn"},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.addPart()}}},[e._v("添加部门")])],1),a("div",{staticClass:"account_form"},[a("vxe-table",{staticClass:"form_table",attrs:{border:"","show-header-overflow":"","show-overflow":"","highlight-hover-row":"",align:"center",data:e.tableData}},[a("vxe-table-column",{attrs:{field:"deptId",title:"部门编号"}}),a("vxe-table-column",{attrs:{field:"deptName",title:"部门名称"}}),a("vxe-table-column",{attrs:{field:"orderNum",title:"排序"}}),a("vxe-table-column",{attrs:{field:"remark",title:"备注"}}),a("vxe-table-column",{attrs:{title:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",[e._v(e._s(e.$moment(1e3*r.createdTime).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),a("vxe-table-column",{attrs:{field:"statusStr",title:"状态"}}),a("vxe-table-column",{staticClass:"table_todo",attrs:{width:"200",title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("vxe-button",{attrs:{type:"text"},on:{click:function(t){return e.diaPage(r)}}},[e._v("编辑")]),a("vxe-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteData(r)}}},[e._v("删除")])]}}])})],1),e.page5.totalResult>0?a("vxe-pager",{attrs:{background:"","current-page":e.page5.currentPage,"page-size":e.page5.pageSize,total:e.page5.totalResult,layouts:["Total","PrevJump","PrevPage","JumpNumber","NextPage","NextJump","FullJump","Sizes"]},on:{"update:currentPage":function(t){return e.$set(e.page5,"currentPage",t)},"update:current-page":function(t){return e.$set(e.page5,"currentPage",t)},"update:pageSize":function(t){return e.$set(e.page5,"pageSize",t)},"update:page-size":function(t){return e.$set(e.page5,"pageSize",t)},"page-change":e.handlePageChange2}}):e._e()],1),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closedialogbmkl}},[a("div",{staticClass:"dia_form"},[e.dialogVisible?a("el-form",{ref:"closedialogbmkl",attrs:{rules:e.rules,model:e.form,"label-width":"4.167vw"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[a("el-input",{model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"上级部门"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}},e._l(e.$store.state.option.sysDeptgetPageDept,(function(e){return a("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"备注:"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"账号状态:"}},[a("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-text":0===e.form.status?"启用":"禁用","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closedialogbmkl("closedialogbmkl")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sureDepart("closedialogbmkl")}}},[e._v("确 定")])],1)])],1)},l=[],i=a("4ec3"),o={data:function(){return{title:"",allAlign:null,tableData:[],page5:{currentPage:1,pageSize:10,totalResult:0},dialogVisible:!1,addVisible:!1,deleteVisible:!1,form:{deptName:"",parentId:"",remark:"",status:0},rules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}]}}},created:function(){this.ajaxTable()},methods:{closedialogbmkl:function(){this.$refs["closedialogbmkl"].resetFields(),this.dialogVisible=!1},handlePageChange2:function(e){var t=e.currentPage,a=e.pageSize;this.page5.currentPage=t,this.page5.pageSize=a,this.ajaxTable()},diaPage:function(e){var t=this;this.title="编辑部门";var a={deptId:e.deptId};i["a"].sysDeptgetGetDept(a).then((function(e){t.$store.commit("loadingChange",!1),0==e.code?(t.form=JSON.parse(JSON.stringify(e.content)),t.dialogVisible=!t.dialogVisible):t.$message.error(e.msg)}))},sureDepart:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(e){var r=t.form;t.$store.commit("loadingChange",!0),i["a"].sysDeptSaveOrUpdateDept(r).then((function(e){t.$store.commit("loadingChange",!1),0==e.code?(a.dialogVisible=!1,a.page5.currentPage=1,a.page5.pageSize=10,a.ajaxTable()):a.$message.error(e.msg)}))}}))},ajaxTable:function(){var e=this,t=this,a={content:{deptName:"",status:""},pager:{pageSize:t.page5.pageSize,currentPage:t.page5.currentPage}};this.$store.commit("loadingChange",!0),i["a"].sysDeptgetPageDept(a).then((function(a){e.$store.commit("loadingChange",!1),0==a.code?(t.tableData=a.content.list,t.page5.totalResult=a.content.pager.totalCount,t.page5.currentPage=a.content.pager.currentPage):e.$message.error(a.msg)}))},addPart:function(){this.title="添加部门",this.dialogVisible=!this.dialogVisible,this.form={deptName:"",parentId:"",remark:"",status:0}},deleteData:function(e){var t=this,a=this;this.$confirm("此操作将永久删除"+e.deptName+", 是否继续?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){t.$store.commit("loadingChange",!0);var r={deptId:e.deptId};i["a"].sysDeptdeleteDept(r).then((function(e){t.$store.commit("loadingChange",!1),0==e.code?(a.page5.currentPage=t.page5.currentPage,a.page5.pageSize=t.page5.pageSize,a.ajaxTable()):a.$message.error(e.msg)}))}))}}},n=o,s=(a("2792"),a("9ca4")),c=Object(s["a"])(n,r,l,!1,null,"49d968df",null);t["default"]=c.exports},bb24:function(e,t,a){}}]);