webpackJsonp([25],{M6CI:function(t,a){},dTiG:function(t,a,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=o("lC5x"),e=o.n(n),s=o("J0Oq"),i=o.n(s),r=o("3cXf"),c=o.n(r),l=o("l/JR"),m=(o("ssT3"),{data:function(){var t=this,a=function(a,o,n){if("loanMoney"==a.field)if(t.form.loanMoney){/\d/.test(t.form.loanMoney)?n():n(new Error("请输入数字"))}else n(new Error("请输入贷款需求"));else t.form.loanCycle?n():n(new Error("请选择贷款周期"))};return{HasCompanys:!1,chooseCompanys:!1,companyList:[],form:{id:"",userId:"",customerName:"",businessNo:"",loanMoney:"",loanCycle:"",hasMortgage:!1,indutryType:"",staffCount:"",busYears:0,busRange:"",mortgage:0,purchaser:0,mortgageValue:"",purchaserContract:""},rules:{loanMoney:[{required:!0,validator:a,trigger:"blur"}],loanCycle:[{required:!0,validator:a,trigger:"change"}]},companyLoanInfo:"",companyId:""}},created:function(){sessionStorage.removeItem("loanInfo"),sessionStorage.removeItem("company_id"),this.companyId=this.$route.query.id,this.getField()},methods:{handleClickMask2:function(t){!1===t?this.HasCompanys=!1:!0===t&&this.$router.push({name:"add-company"})},handleClickMask:function(t){this.companyId=t,this.getCompanyLoanInfo(),this.chooseCompanys=!1},getCompanyList:function(){var t=this;this.chooseCompanys=!0;var a={userId:this.$store.state.user.myBaseInfo.userId};l.a.post("/sysCompany/getCompanyByUserId",a,"nauth").then(function(a){0==a.code&&(t.companyList=a.content||[])}).catch(function(t){})},getCompanyLoanInfo:function(){var t=this,a="/sysCompany/getMainCompany",o="";this.companyId&&(a="/loanInfoMaterial/getLoanMaterial",o={companyId:this.companyId}),l.a.post(a,o,"nauth").then(function(a){a&&(t.companyLoanInfo=a.content,t.companyLoanInfo||(t.HasCompanys=!0),sessionStorage.setItem("AllInfos",c()(a.content)),t.form=a.content,t.form&&(t.form.loanMoney=t.form.loanMoney?t.form.loanMoney+"":"",t.form.loanCycle=t.form.loanCycle?t.form.loanCycle+"":"",t.form.hasMortgage=!!t.form.hasMortgage,t.companyId&&sessionStorage.setItem("company_id",t.companyId),sessionStorage.setItem("allLoanInfo",c()(t.form))),console.log(t.form))})},formatError:function(){},sizeError:function(){},upSuccess:function(){},nextPage:function(){var t=this;this.$refs.form.validate(function(a){if(a){var o={companyId:t.companyId,loanMoney:t.form.loanMoney,loanCycle:t.form.loanCycle,hasMortgage:t.form.hasMortgage,mortgageValue:t.form.mortgageValue};sessionStorage.setItem("loanInfo",c()(o)),t.$router.push({name:"company-enterprice-info"})}})},getField:function(){var t=this;return i()(e.a.mark(function a(){return e.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.post("/sysCode/getCode",{codeType:"DKZQ"},"nauth");case 2:t.fields=a.sent,t.getCompanyLoanInfo();case 4:case"end":return a.stop()}},a,t)}))()},setField:function(t){var a=[],o=this.fields&&this.fields.content||[];return o&&o.length&&(a=o.filter(function(a){return a.codeType==t})),console.log(a),a.length>0?a[0].sysCodeVoList:[]}}}),f={render:function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"my-company"},[t.companyLoanInfo?o("div",{staticClass:"my-company-content"},[t.companyLoanInfo.companyName?o("div",{staticClass:"c-info"},[o("div",{staticClass:"c-text"},[o("span",{staticClass:"c-name"},[t._v(t._s(t.companyLoanInfo.companyName))]),t._v(" "),o("Icon",{staticClass:"c-img",attrs:{type:"ios-checkmark-circle"}}),t._v(" "),o("span",{staticClass:"status"},[t._v(t._s(t.companyLoanInfo.authenticationStatusStr))])],1),t._v(" "),o("div",{staticClass:"c-btn",on:{click:t.getCompanyList}},[t._v("更换企业")])]):t._e(),t._v(" "),o("div",{staticClass:"line"}),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"line"}),t._v(" "),o("div",{staticClass:"info-form"},[t._m(1),t._v(" "),o("Form",{ref:"form",staticClass:"form-info",attrs:{model:t.form,rules:t.rules,"label-width":160}},[o("FormItem",{staticClass:"required",attrs:{label:"我的贷款需求",prop:"loanMoney"}},[o("Input",{attrs:{placeholder:"请输入我的贷款需求"},model:{value:t.form.loanMoney,callback:function(a){t.$set(t.form,"loanMoney",a)},expression:"form.loanMoney"}},[o("div",{staticClass:"append",attrs:{slot:"append"},slot:"append"},[t._v("万元")])])],1),t._v(" "),o("FormItem",{attrs:{label:"贷款周期",prop:"loanCycle"}},[o("Select",{model:{value:t.form.loanCycle,callback:function(a){t.$set(t.form,"loanCycle",a)},expression:"form.loanCycle"}},t._l(t.setField("DKZQ"),function(a){return o("Option",{key:a.code,attrs:{value:a.code}},[t._v(t._s(a.value))])}),1)],1),t._v(" "),o("FormItem",{attrs:{label:"是否有抵押物",prop:"hasMortgage"}},[o("div",{staticClass:"mortgage-box"},[o("i-switch",{model:{value:t.form.hasMortgage,callback:function(a){t.$set(t.form,"hasMortgage",a)},expression:"form.hasMortgage"}}),t._v(" "),t.form.hasMortgage?o("div",{staticClass:"mortgage-input"},[o("div",{staticClass:"input-label"},[t._v("抵押物价值")]),t._v(" "),o("Input",{staticClass:"input-text",attrs:{placeholder:"请输入抵押物价值"},model:{value:t.form.mortgageValue,callback:function(a){t.$set(t.form,"mortgageValue",a)},expression:"form.mortgageValue"}},[o("div",{staticClass:"append",attrs:{slot:"append"},slot:"append"},[t._v("万元")])])],1):t._e()],1)])],1),t._v(" "),o("div",{staticClass:"next-btn",on:{click:t.nextPage}},[t._v("下一步")])],1)]):o("div",{staticClass:"noData"},[o("p",[t._v("您还没有添加企业，添加企业并且认证成功后可填写贷款需求")]),t._v(" "),o("div",{staticClass:"btns btn-one",on:{click:function(a){return t.$router.push({name:"add-company"})}}},[t._v("去添加企业")])]),t._v(" "),o("mask-layer",{staticClass:"reason-mask",attrs:{show:t.chooseCompanys,"title-name":"更换企业","box-width":"28.646vw"},on:{close:function(a){t.chooseCompanys=!1}}},[o("template",{slot:"content"},[o("div",{staticClass:"reason-content"},t._l(t.companyList,function(a,n){return o("div",{staticClass:"companyList"},[o("p",[t._v(t._s(a.companyName))]),t._v(" "),o("div",{staticClass:"btns btn-one",on:{click:function(o){return t.handleClickMask(a.id)}}},[t._v("选择")])])}),0)])],2),t._v(" "),o("mask-layer",{staticClass:"reason-mask2",attrs:{show:t.HasCompanys,"title-name":"","box-width":"28.646vw","box-height":"16.667vw"},on:{close:function(a){return t.handleClickMask2(!1)}}},[o("template",{slot:"content"},[o("p",{staticClass:"tTitle"},[t._v("提示")]),t._v(" "),o("div",{staticClass:"reason-content"},[o("div",{staticClass:"companyList"},[o("p",[t._v("欢迎来到普惠金融服务平台")]),t._v(" "),o("p",[t._v("填写贷款需求需要添加企业并认证成功，是否现在添加？")])]),t._v(" "),o("div",{staticClass:"butns"},[o("div",{staticClass:"btns btn-two",on:{click:function(a){return t.handleClickMask2(!1)}}},[t._v("取消")]),t._v(" "),o("div",{staticClass:"btns btn-one",on:{click:function(a){return t.handleClickMask2(!0)}}},[t._v("添加企业")])])])])],2)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"step"},[a("img",{staticStyle:{width:"100%"},attrs:{src:"/static/images/stpe1.png"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"tips"},[a("div",{staticClass:"tips-text"},[a("div",[this._v("以下提交的所有资料均妥善安全存储于重庆市大数据局仅用于贷款申请服务")]),this._v(" "),a("div",[this._v("您所填写资料的完善度将会影响到系统为您匹配贷款产品的准确率，请您务必如实填写详尽")])])])}]};var p=o("C7Lr")(m,f,!1,function(t){o("M6CI")},"data-v-60f8eb79",null);a.default=p.exports}});