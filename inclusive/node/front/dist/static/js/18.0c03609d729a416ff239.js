webpackJsonp([18],{M6jh:function(e,t){},xMh3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{IsShowPsd:"password",reform:{mobile:this.$route.query.tel,smsCode:"",password:""},regrules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(e,t,s){return/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(t)?s():s(new Error("请输入正确的手机号码"))},trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{validator:function(e,t,s){return t&&(t.length<6||!/^[a-zA-Z0-9]*$/.test(t))?s(new Error("请输入不少于6位的字母+数字组合")):s()},trigger:"blur"}],smsCode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]},imageCode:"",activeIndex:1,codeTip:"点击发送",codeTimer:null}},created:function(){this.getImageCode()},methods:{setIsShowPsd:function(){this.IsShowPsd="password"===this.IsShowPsd?"text":"password"},tabChange:function(e){this.activeIndex=e,1==e?this.$refs.form&&this.$refs.form.resetFields():this.$refs.reform&&this.$refs.reform.resetFields()},getImageCode:function(){var e=this;this.$api.user.getImageCode().then(function(t){if(t.data.status<400){var s=new FileReader;s.readAsDataURL(t.data.data),s.onload=function(t){e.imageCode=t.target.result}}})},subForm:function(){var e=this;this.$refs.reform.validate(function(t){t&&(console.log(e.reform),e.$api.user.resetPwd(e.reform).then(function(t){t.err?e.$alert.success(t.err.msg):(e.$alert.success("已修改"),e.$router.replace({name:"nlogin"}))}))})},handleGetCode:function(){var e=this;this.reform.mobile?this.codeTimer||this.$api.user.getCode({mobile:this.reform.mobile,smsType:1}).then(function(t){500!==t.err.code?(t.err?(e.codeTip="重新获取",clearInterval(e.codeTimer),e.codeTimer=null,e.errorFun(t.err)):(e.$alert.success("短信已发送，5分钟内有效。"),e.startTimer()),t.data&&0==t.data.code&&(e.reform.uuid=t.data.content)):e.$alert.warning(t.err.message)}).catch(function(e){}):this.$alert.success("请输入手机号")},startTimer:function(){var e=this,t=120;this.codeTip="重新获取("+t+"s)",this.codeTimer=setInterval(function(){e.codeTip="重新获取("+t+"s)",0===--t&&(e.codeTip="重新获取",clearInterval(e.codeTimer),e.codeTimer=null,t=120)},1e3)}},beforeDestroy:function(){clearInterval(this.codeTimer)}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-box"},[e._m(0),e._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"forget-box"},[e._v("\n      忘记密码\n    ")]),e._v(" "),s("Form",{ref:"reform",staticClass:"login-form",attrs:{model:e.reform,rules:e.regrules,"label-width":0}},[s("FormItem",{attrs:{prop:"mobile"}},[s("div",{staticClass:"tel"},[s("span",[e._v("手机号码：")]),e._v(" "),s("Input",{attrs:{placeholder:"请输入手机号"},model:{value:e.reform.mobile,callback:function(t){e.$set(e.reform,"mobile",t)},expression:"reform.mobile"}})],1)]),e._v(" "),s("FormItem",{attrs:{prop:"smsCode"}},[s("div",{staticClass:"code"},[s("Input",{attrs:{placeholder:"短信验证码"},model:{value:e.reform.smsCode,callback:function(t){e.$set(e.reform,"smsCode","string"==typeof t?t.trim():t)},expression:"reform.smsCode"}}),e._v(" "),s("div",{staticClass:"send-sms",on:{click:e.handleGetCode}},[e._v(e._s(e.codeTip))])],1)]),e._v(" "),s("FormItem",{attrs:{prop:"password"}},[s("Input",{attrs:{placeholder:"不少于6位的字母+数字组合",type:e.IsShowPsd},model:{value:e.reform.password,callback:function(t){e.$set(e.reform,"password","string"==typeof t?t.trim():t)},expression:"reform.password"}},[s("Icon",{attrs:{slot:"append",type:"md-eye-off"},nativeOn:{click:function(t){return e.setIsShowPsd(t)}},slot:"append"})],1)],1)],1),e._v(" "),s("div",{staticClass:"login-btn",on:{click:e.subForm}},[e._v("提 交")]),e._v(" "),e._m(1)],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"left"},[r("img",{staticClass:"logo-image",attrs:{src:s("UR+/"),alt:"logo"}}),e._v(" "),r("div",{staticClass:"s-title"},[e._v("三高九龙坡 三宜山水城")]),e._v(" "),r("div",{staticClass:"s-title-text"},[e._v("政府官方平台")]),e._v(" "),r("div",{staticClass:"s-title-text"},[e._v("数据安全")]),e._v(" "),r("div",{staticClass:"s-title-text"},[e._v("申请便捷")]),e._v(" "),r("div",{staticClass:"line"}),e._v(" "),r("div",{staticClass:"match"},[r("div",{staticClass:"m-title"},[e._v("精准匹配")]),e._v(" "),r("div",{staticClass:"m-desc"},[e._v("一次匹配多家银行产品")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"l-text"},[t("span",[this._v("如一直未收到验证码请致电客服：023-6173 8886")])])}]};var o=s("C7Lr")(r,i,!1,function(e){s("M6jh")},"data-v-97a9832a",null);t.default=o.exports}});