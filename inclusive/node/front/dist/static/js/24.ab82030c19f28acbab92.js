webpackJsonp([24],{"+Mps":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("lC5x"),s=r.n(a),o=r("J0Oq"),n=r.n(o),l=r("3cXf"),i=r.n(l),u=r("l/JR"),c=r("ssT3"),m={data:function(){return{form:{id:"",userId:"",customerName:"",businessNo:"",loanMoney:"",loanCycle:"",indutryType:"",staffCount:"",busYears:0,busRange:"",mortgage:0,purchaser:0,mortgageValue:0,purchaserContract:""},rules:{customerName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],businessNo:[{required:!0,message:"请输入社会信用代码",trigger:"blur"}],loanCycle:[{required:!0,message:"请输入贷款周期",trigger:"blur"}],loanMoney:[{required:!0,message:"请输入我的贷款需求",trigger:"blur",type:"number"}],indutryType:[{required:!0,message:"请输入行业类型",trigger:"blur"}],staffCount:[{required:!0,message:"请输入企业人员规模",trigger:"blur"}],busYears:[{required:!0,message:"请输入经营年限",trigger:"blur",type:"number"}],busRange:[{required:!0,message:"请输入经营范围",trigger:"blur"}]},headers:{},fields:[],companyInfo:{},uploadurl:"http://124.70.157.102:9002/inclusive/loanInfoMaterial/uploadFile",companyId:""}},created:function(){var e=this;this.companyId=this.$route.query.id||"",sessionStorage.removeItem("loan_data"),this.headers={token:Object(c.b)(),Authorization:"Bearer "+Object(c.b)()},this.getField(),setTimeout(function(){e.getLoanDetail()},1e3)},methods:{sizeError:function(){},upSuccess:function(e,t,r){e&&0==e.code&&e.content&&this.form.purchaserFileNode.push(e.content),console.log(e)},getLoanDetail:function(){var e=this;u.a.post("/loanInfoMaterial/getLoanMaterial",{companyId:this.companyId,id:""},"nauth").then(function(t){0==t.code&&(e.form=t.content,e.form.mortgageValue=e.form.mortgageValue?+e.form.mortgageValue:0,e.form.loanCycle=e.form.loanCycle+"",e.form.industryType=e.form.industryType+"",e.form.staffCount=e.form.staffCount+"",e.form.busYears=e.form.busYears+"",e.form.purchaserFileNode=e.form.purchaserFileNode&&e.form.purchaserFileNode.length?e.form.purchaserFileNode:[])})},getCompany:function(){var e=this;u.a.post("/phjr-manager-service/customer/findCustomerDetailByUserId",{userId:this.$store.state.user.myBaseInfo.id}).then(function(t){e.companyInfo=t,e.form=e.companyInfo.customerBaseVo,e.form.mortgage=null==e.form.mortgage?0:e.form.mortgage,e.form.purchaser=null==e.form.purchaser?0:e.form.purchaser,e.form.staffCount=null!=e.form.staffCount?String(e.form.staffCount):"",e.form.loanCycle=null!=e.form.loanCycle?String(e.form.loanCycle):"",localStorage.setItem("companyId",e.companyInfo.customerBaseVo.id),localStorage.setItem("fileId",e.companyInfo.qualificationBaseVo.id),localStorage.setItem("companyInfo",i()(e.companyInfo))}).catch(function(t){return e.$alert.success(t.message)})},nextStep:function(){var e=this;this.$refs.form.validate(function(t){if(t){localStorage.setItem("step1",i()(e.form)),e.subForm()}})},subForm:function(){var e=this,t=i()(this.form);(t=JSON.parse(t)).userId||(t.userId=this.$store.state.user.myBaseInfo.id),u.a.post("/phjr-manager-service/customer/saveCustomer",t).then(function(t){e.$alert.success("操作成功"),e.$router.push({name:"company-enterprice-info",params:{edit:1}})}).catch(function(t){return e.$alert.success(t.message)})},getField:function(){var e=this;return n()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("/sysCode/getCode",{codeType:"DKZQ,HYLX,RYGM,JYNX"},"nauth");case 2:e.fields=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},setField:function(e){var t=(this.fields.content||[]).filter(function(t){return t.codeType==e});return t.length>0?t[0].sysCodeVoList:[]}}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-company"},[e.form.companyName?r("div",{staticClass:"c-info"},[r("div",{staticClass:"c-text"},[r("span",{staticClass:"c-name"},[e._v(e._s(e.form.companyName))]),e._v(" "),r("Icon",{staticClass:"c-img",attrs:{type:"ios-checkmark-circle"}}),e._v(" "),r("span",{staticClass:"status"},[e._v(e._s(e.form.authenticationStatusStr))])],1)]):e._e(),e._v(" "),r("div",{staticClass:"line"}),e._v(" "),e._m(0),e._v(" "),r("div",{staticClass:"line"}),e._v(" "),r("div",{staticClass:"info-form"},[e._m(1),e._v(" "),r("Form",{ref:"form",staticClass:"form-info",attrs:{model:e.form,"label-width":160,rules:e.rules}},[r("FormItem",{attrs:{label:"企业名称",prop:"companyName"}},[r("Input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1),e._v(" "),r("FormItem",{attrs:{label:"社会信用代码",prop:"businessLicense"}},[r("Input",{attrs:{placeholder:"请输入社会信用代码"},model:{value:e.form.businessLicense,callback:function(t){e.$set(e.form,"businessLicense",t)},expression:"form.businessLicense"}})],1),e._v(" "),r("FormItem",{attrs:{label:"我的贷款需求",prop:"loanMoney"}},[r("Input",{attrs:{type:"number",min:"0",placeholder:"请输入我的贷款需求"},model:{value:e.form.loanMoney,callback:function(t){e.$set(e.form,"loanMoney",e._n(t))},expression:"form.loanMoney"}},[r("div",{staticClass:"append",attrs:{slot:"append"},slot:"append"},[e._v("万元")])])],1),e._v(" "),r("FormItem",{attrs:{label:"贷款周期",prop:"loanCycle"}},[r("Select",{model:{value:e.form.loanCycle,callback:function(t){e.$set(e.form,"loanCycle",t)},expression:"form.loanCycle"}},e._l(e.setField("DKZQ"),function(t){return r("Option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),r("FormItem",{attrs:{label:"行业类型",prop:"indutryType"}},[r("Select",{model:{value:e.form.indutryType,callback:function(t){e.$set(e.form,"indutryType",t)},expression:"form.indutryType"}},e._l(e.setField("HYLX"),function(t){return r("Option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),r("FormItem",{attrs:{label:"企业人员规模",prop:"staffCount"}},[r("Select",{model:{value:e.form.staffCount,callback:function(t){e.$set(e.form,"staffCount",t)},expression:"form.staffCount"}},e._l(e.setField("RYGM"),function(t){return r("Option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),r("FormItem",{attrs:{label:"经营年限",prop:"busYears"}},[r("Select",{model:{value:e.form.busYears,callback:function(t){e.$set(e.form,"busYears",t)},expression:"form.busYears"}},e._l(e.setField("JYNX"),function(t){return r("Option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.value))])}),1)],1),e._v(" "),r("FormItem",{attrs:{label:"经营范围",prop:"busRange"}},[r("Input",{attrs:{placeholder:"请输入经营范围"},model:{value:e.form.busRange,callback:function(t){e.$set(e.form,"busRange",t)},expression:"form.busRange"}})],1),e._v(" "),r("FormItem",{attrs:{label:"是否有抵押物",prop:"hasMortgage"}},[r("i-switch",{attrs:{"true-color":"#ff4949","true-value":1,"false-value":0},model:{value:e.form.hasMortgage,callback:function(t){e.$set(e.form,"hasMortgage",t)},expression:"form.hasMortgage"}})],1),e._v(" "),e.form.hasMortgage?r("FormItem",{staticClass:"mortgage-item",attrs:{label:"抵押物价值",prop:"mortgageValue",rules:{required:!0,message:"请输入抵押物价值",trigger:"blur",type:"number"}}},[r("Input",{staticClass:"input-text",attrs:{placeholder:"请输入抵押物价值"},model:{value:e.form.mortgageValue,callback:function(t){e.$set(e.form,"mortgageValue",e._n(t))},expression:"form.mortgageValue"}},[r("div",{staticClass:"append",attrs:{slot:"append"},slot:"append"},[e._v("万元")])])],1):e._e(),e._v(" "),r("FormItem",{attrs:{label:"为政府采购供应商",prop:"purchaser"}},[r("i-switch",{attrs:{"true-color":"#ff4949","true-value":1,"false-value":0},model:{value:e.form.purchaser,callback:function(t){e.$set(e.form,"purchaser",t)},expression:"form.purchaser"}})],1),e._v(" "),e.form.purchaser?r("FormItem",{staticClass:"mortgage-item upload-box",attrs:{label:"",prop:"purchaserFileNode",rules:{required:!0,message:"请上传政府采购合同",trigger:"change",type:"array"}}},[e.form.purchaserFileNode&&e.form.purchaserFileNode.length?r("span",e._l(e.form.purchaserFileNode,function(e,t){return r("img",{key:t,staticStyle:{width:"6.25vw",height:"6.25vw","margin-right":"0.521vw"},attrs:{src:e.value,alt:""}})}),0):e._e(),e._v(" "),r("Upload",{ref:"upload",staticClass:"upload",attrs:{"show-upload-list":!1,"on-success":e.upSuccess,"max-size":102480,"on-exceeded-size":e.sizeError,action:e.uploadurl,headers:e.headers}},[r("div",{staticClass:"upload-btn"},[r("Icon",{attrs:{type:"ios-add",size:"40"}})],1)]),e._v(" "),r("span",{staticClass:"upload-tips"},[e._v("请上传有效的政府采购合同")])],1):e._e()],1),e._v(" "),r("div",{staticClass:"next-btn",on:{click:e.nextStep}},[e._v("下一步")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"step"},[t("img",{staticStyle:{width:"100%"},attrs:{src:"/static/images/stpe1.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tips"},[t("div",{staticClass:"tips-text"},[t("div",[this._v("以下提交的所有资料均妥善安全存储于重庆市大数据局仅用于贷款申请服务")]),this._v(" "),t("div",[this._v("您所填写资料的完善度将会影响到系统为您匹配贷款产品的准确率，请您务必如实填写详尽")])])])}]};var p=r("C7Lr")(m,f,!1,function(e){r("AVRV")},"data-v-62eb75ef",null);t.default=p.exports},AVRV:function(e,t){}});