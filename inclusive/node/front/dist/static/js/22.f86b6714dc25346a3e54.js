webpackJsonp([22],{"AL+U":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("lC5x"),n=t.n(r),i=t("J0Oq"),o=t.n(i),a=t("3cXf"),c=t.n(a),u=t("4YfN"),m=t.n(u),l=t("l/JR"),d=t("ssT3"),f={data:function(){var e=this,s=function(s,t,r){"registAddress"==s.field?e.form.registerProvince&&e.form.registerCounty?r():r(new Error("请选择注册地址")):e.form.businessProvince&&e.form.businessCounty?r():r(new Error("请选择经营地址"))};return{form:{companyName:"",businessLicense:"",registerProvince:"chongqing",registerCounty:"",businessProvince:"chongqing",businessCounty:""},rules:{companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],businessLicense:[{required:!0,validator:function(s,t,r){e.form.businessLicense?/^([0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}|[1-9]\d{14})$/.test(e.form.businessLicense)?r():r(new Error("请输入正确格式的社会信用代码")):r(new Error("请输入社会信用代码"))},trigger:"blur"}],registAddress:[{required:!0,validator:s,trigger:"blur"}],bussinessAddress:[{required:!0,validator:s,trigger:"blur"}]},headers:{},fields:[],companyInfo:{},uploadurl:"http://124.70.157.102:9002/phjr-manager-service/file/uploadFile",registAddressArr:[{name:"重庆市",code:"chongqing"}],pageType:"",companyId:""}},created:function(){this.$nextTick(function(){document.getElementsByClassName("user-center-right")[0].setAttribute("style","background : #ffffff")}),sessionStorage.removeItem("companyData"),sessionStorage.removeItem("company_id"),this.pageType=this.$route.query.type||"",this.companyId=this.$route.query.id||"",this.headers={token:Object(d.b)()},this.getField(),("certificate"==this.pageType||this.companyId)&&(sessionStorage.setItem("company_id",this.companyId),this.getCompany())},methods:{formatError:function(){},sizeError:function(){},upSuccess:function(e,s,t){200==e.code&&1==e.state&&(this.form.purchaserContract=e.data.value)},getCompany:function(){var e=this;l.a.post("/sysCompany/getCertificationInfo",{companyId:this.companyId},"nauth").then(function(s){if(console.log(s),0==s.code&&s.content){var t=s.content.companyInfoVo;t&&(e.form={companyName:t.companyName,businessLicense:t.businessLicense,registerProvince:t.registerProvince,registerCounty:t.registerCounty+"",businessProvince:t.businessProvince,businessCounty:t.businessCounty+""})}}).catch(function(s){return e.$alert.success(s.message)})},nextStep:function(){var e=this;this.$refs.form.validate(function(s){if(s){var t=m()({},e.form);sessionStorage.setItem("companyData",c()(t)),e.$router.push({name:"add-company-stwo"})}})},subForm:function(){var e=this,s=c()(this.form);(s=JSON.parse(s)).userId||(s.userId=this.$store.state.user.myBaseInfo.id),l.a.post("/phjr-manager-service/customer/saveCustomer",s).then(function(s){e.$alert.success("操作成功"),e.$router.push({name:"company-enterprice-info",params:{edit:1}})}).catch(function(s){return e.$alert.success(s.message)})},getField:function(){var e=this;return o()(n.a.mark(function s(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,l.a.post("/sysCode/getCode",{codeType:"ZCDZ,JYDZ"},"nauth");case 2:e.fields=s.sent;case 3:case"end":return s.stop()}},s,e)}))()},setField:function(e){var s=(this.fields&&this.fields.content||[]).filter(function(s){return s.codeType==e});return s.length>0?s[0].sysCodeVoList:[]}}},p={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"my-company"},[e._m(0),e._v(" "),t("div",{staticClass:"line"}),e._v(" "),t("div",{staticClass:"info-form"},[e._m(1),e._v(" "),t("Form",{ref:"form",staticClass:"form-info",attrs:{model:e.form,"label-width":160,rules:e.rules}},[t("FormItem",{attrs:{label:"企业名称",prop:"companyName"}},[t("Input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.form.companyName,callback:function(s){e.$set(e.form,"companyName",s)},expression:"form.companyName"}})],1),e._v(" "),t("FormItem",{attrs:{label:"社会信用代码",prop:"businessLicense"}},[t("Input",{attrs:{placeholder:"请输入社会信用代码"},model:{value:e.form.businessLicense,callback:function(s){e.$set(e.form,"businessLicense",s)},expression:"form.businessLicense"}})],1),e._v(" "),t("FormItem",{attrs:{label:"注册地址",prop:"registAddress"}},[t("div",{staticClass:"address"},[t("Select",{model:{value:e.form.registerProvince,callback:function(s){e.$set(e.form,"registerProvince",s)},expression:"form.registerProvince"}},e._l(e.registAddressArr,function(s){return t("Option",{key:s.code,attrs:{value:s.code}},[e._v(e._s(s.name))])}),1),e._v(" "),t("Select",{model:{value:e.form.registerCounty,callback:function(s){e.$set(e.form,"registerCounty",s)},expression:"form.registerCounty"}},e._l(e.setField("ZCDZ"),function(s){return t("Option",{key:s.code,attrs:{value:s.code}},[e._v(e._s(s.value))])}),1)],1)]),e._v(" "),t("FormItem",{attrs:{label:"经营地址",prop:"bussinessAddress"}},[t("div",{staticClass:"address"},[t("Select",{model:{value:e.form.businessProvince,callback:function(s){e.$set(e.form,"businessProvince",s)},expression:"form.businessProvince"}},e._l(e.registAddressArr,function(s){return t("Option",{key:s.code,attrs:{value:s.code}},[e._v(e._s(s.name))])}),1),e._v(" "),t("Select",{model:{value:e.form.businessCounty,callback:function(s){e.$set(e.form,"businessCounty",s)},expression:"form.businessCounty"}},e._l(e.setField("JYDZ"),function(s){return t("Option",{key:s.code,attrs:{value:s.code}},[e._v(e._s(s.value))])}),1)],1)])],1),e._v(" "),t("div",{staticClass:"next-btn",on:{click:e.nextStep}},[e._v("下一步")])],1)])},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"step"},[s("img",{staticStyle:{width:"100%"},attrs:{src:"/static/images/add01.png"}})])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"tips"},[s("div",{staticClass:"tips-text"},[s("div",[this._v("以下提交的所有资料均妥善安全存储于重庆市大数据局仅用于贷款匹配服务")]),this._v(" "),s("div",[this._v("您提交认证材料后，平台将在24小时内给予审核结果反馈，为保证审核效率，请务必上传符合要求的资料")]),this._v(" "),s("div",[this._v("平台审核通过后，您的身份将默认为本企业管理员")])])])}]};var v=t("C7Lr")(f,p,!1,function(e){t("W/zC")},"data-v-7739a12c",null);s.default=v.exports},"W/zC":function(e,s){}});